<div dir="ltr" style="text-align: left;" trbidi="on">
О кешировании. Вводная.<br />
<br />
"Предыдущая" серия была тут - <a href="http://programmingmindstream.blogspot.ru/2015/12/1145.html">http://programmingmindstream.blogspot.ru/2015/12/1145.html</a><br />
<br />
Теперь хотелось бы поговорить о кешировании значений функций.<br />
<br />
Для понимания всего написанного далее неплохо было бы ознакомиться с <a href="https://ru.wikipedia.org/wiki/%D0%A4%D0%BE%D1%80%D1%82_(%D1%8F%D0%B7%D1%8B%D0%BA_%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F)">https://ru.wikipedia.org/wiki/%D0%A4%D0%BE%D1%80%D1%82_(%D1%8F%D0%B7%D1%8B%D0%BA_%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F)</a>.<br />
<br />
У нас все элементы, что "модели", что вообще говоря "словаря скриптовой машины" выглядят примерно так:<br />
<br />
<pre class="brush:delphi">: OuterElement1
 CONST Const1 Value1
 ...
 CONST ConstN ValueN

 VAR Var1
 ...
 VAR VarN

 : InnerElement1
  InnerElementCode1
 ; // InnerElement1
 ...
 : InnerElementN
  InnerElementCodeN
 ; // InnerElementN

 OuterElementCode1
; // OuterElement1
...
: OuterElementN
 CONST Const1 Value1
 ...
 CONST ConstN ValueN

 VAR Var1
 ...
 VAR VarN

 : InnerElement1
  InnerElementCode1
 ; // InnerElement1
 ...
 : InnerElementN
  InnerElementCodeN
 ; // InnerElementN

 OuterElementCodeN
; // OuterElementN
</pre>
<br />
Что тут написано?<br />
<br />
Договоримся для начала, что "элемент словаря" и "слово" - это ТОЖДЕСТВЕННЫЕ понятия, если другое не оговорено особо.<br />
<br />
<b>:</b> - определяет новый элемент словаря.<br />
<br />
<b>CONST</b> - определяет константу внутри элемента словаря.<br />
<br />
<b>VAR</b> - определяет переменную внутри элемента словаря.<br />
<br />
[XXX]<b>ElementCode</b>[YYY] - "код" слова, который будет выполнен при "вызове" слова.<br />
<br />
<b>;</b> - завершает определение слова.<br />
<br />
Далее.<br />
<br />
Давайте для начала разберёмся с "кодом слова".<br />
<br />
Пусть есть пример:<br />
<br />
<pre class="brush:delphi">: A
 1
; // A

A Print
</pre>
<br />
Что он сделает?<br />
<br />
Он вызовет "код слова" A, который в данном случае равен "1"<br />
<br />
Что мы в итоге получим?<br />
<br />
Мы получим то, что в консоль выведется целочисленное значение "1".<br />
<br />
Как это происходит?<br />
<br />
Сначала конструкция ": A" - определит в словаре слово A.<br />
<br />
Потом конструкция "1" - определит "код слова A" который будет уметь класть значение "1" на стек.<br />
<br />
Потом конструкция "A Print" - вызовет сначала слово A (которое положит на стек значение "1"), а потом слово Print (которое возьмёт со стека значение "1" и напечатает его в консоль).<br />
<br />
Теперь поговорим о <b>константах</b>.<br />
<br />
Константы у нас, как и в любых других (известных мне) языках программирования, это просто именованные неизменяемые значения.<br />
<br />
Перепишем наш пример:<br />
<br />
<pre class="brush:delphi">: A
 CONST One 1
 One
; // A

A Print
</pre>
<br />
Что тут происходит?<br />
<br />
Ну вообще говоря - код делает то же самое, что и в предыдущем примере. А именно - выводит в консоль целочисленное значение "1".<br/><br/>
</div>
